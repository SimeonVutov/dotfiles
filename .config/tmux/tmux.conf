# ========================
# Advanced Tmux Configuration
# ========================

# --- Prefix key ---
# Use Ctrl+a like GNU screen
unbind C-b
set-option -g prefix C-a
bind-key C-a send-prefix

# --- Mouse support ---
set -g mouse on

# --- Pane splitting ---
# Use | for vertical split, - for horizontal
bind | split-window -h
bind - split-window -v
unbind '"'
unbind %

# --- Vim-style pane navigation ---
bind h select-pane -L
bind j select-pane -D
bind k select-pane -U
bind l select-pane -R

# --- Resize panes with Ctrl+Arrow ---
bind -r C-Left resize-pane -L 5
bind -r C-Right resize-pane -R 5
bind -r C-Up resize-pane -U 5
bind -r C-Down resize-pane -D 5

# --- Reload config easily ---
bind r source-file ~/.tmux.conf \; display "Config reloaded!"

# --- Status Bar ---
set -g status-bg colour235
set -g status-fg colour136
set -g status-left-length 40
set -g status-right-length 100
set -g status-interval 5

# Left status: session name
set -g status-left "#[fg=green] #S #[default]"

# Right status: CPU, Memory, Time
set -g status-right "#[fg=yellow]#(uptime | awk -F ',' '{print $1}') #[fg=cyan]%Y-%m-%d %H:%M #[default]"

# --- Session restoration plugins ---
# Install TPM first: https://github.com/tmux-plugins/tpm
set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-resurrect'     # Save & restore sessions
set -g @plugin 'tmux-plugins/tmux-continuum'    # Auto-save every 15 mins

# Tmux Continuum settings
set -g @continuum-restore 'on'       # restore tmux sessions on reboot
set -g @continuum-save-interval '15' # auto-save interval in minutes

# Initialize TPM (keep this line at the very bottom)
run '~/.tmux/plugins/tpm/tpm'

